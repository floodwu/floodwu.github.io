# 垃圾回收器的工作方式

Java中除了基本类型外的所有对象都在堆上分配，Java虚拟机的工作方式使得Java从堆分配空间的速度可以和其他语言从栈上分配空间的速度相媲美。
垃圾回收器在回收空间的同时会使堆中的对象紧凑排列，因此堆指针可以很容易地移动到尚未被分配的内存区域。

## 常见的垃圾回收方式
1.引用计数：简单、效率低、循环引用难处理；
2.停止-复制：需要暂停程序（所以不属于回台回收模式），需要有两个堆空间；
3.标记-清扫：如果希望得到连续的空间，需要重新整理剩下的对象；
实际Java虚拟机会进行监视，并根据当前的碎片情况采取不同的垃圾回收方式。