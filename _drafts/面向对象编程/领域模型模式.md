# 领域模型模式

领域模型象征着真实世界里项目中的各个参与者，是更纯粹的“万物皆对象”，在其他地方对象总是带着某种具体的责任，而在领域模型中，它们常常被描述为一组属性及附加的代理。常见的做法是将领域模型类直接映射为关系数据库的表。

```php
<?php
namespace woo\domain;

// 抽象基类
abstract class DomainObject {
    private $id;

    function __construct( $id=null ) {
        $this->id = $id;
    }

    function getId( ) {
        return $this->id;
    }

    static function getCollection( $type ) {
        return array();			 		// dummy
    }
 
    function collection() {
        return self::getCollection( get_class( $this ) );
    }
}

// 对应数据库中的Venue表
class Venue extends DomainObject {
    private $name;		// 字段1
    private $spaces;	// 字段2

    function __construct( $id=null, $name=null ) {
        $this->name = $name;
        $this->spaces = self::getCollection("\\woo\\domain\\Space");
        parent::__construct( $id );
    }

    function setSpaces( SpaceCollection $spaces ) {
        $this->spaces = $spaces;
    }

    function getSpaces() {
        return $this->spaces;
    }

    function addSpace( Space $space ) {
        $this->spaces->add( $space );
        $space->setVenue( $this );
    }

    function setName( $name_s ) {
        $this->name = $name_s;
        $this->markDirty();
    }

    function getName( ) {
        return $this->name;
    }
}

$v = new Venue( null, "The grep and grouch" );
?>
```