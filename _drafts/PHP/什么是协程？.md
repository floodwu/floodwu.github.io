# 什么是协程？

协程，又称微线程，纤程。英文名Coroutine。
子程序，或者称为函数，在所有语言中都是层级调用，比如A调用B，B在执行过程中又调用了C，C执行完毕返回，B执行完毕返回，最后是A执行完毕。
所以子程序调用是通过栈实现的，一个线程就是执行一个子程序。子程序调用总是一个入口，一次返回，调用顺序是明确的。而`协程的调用和子程序不同`。
协程看上去也是子程序，但执行过程中，`在子程序内部可中断`，然后转而执行别的子程序（是`中断后执行，而不是函数调用其他的子程序`），在适当的时候再返回来接着执行。
协程的特点在于是一个线程执行（所以不是多线程）。优势就是极高的执行效率。因为子程序切换不是线程切换，而是由程序自身控制，因此，`没有线程切换的开销`，和多线程比，线程数量越多，协程的性能优势就越明显。另一个优势就是`不需要多线程的锁机制`，因为只有一个线程，也不存在同时写变量冲突，在协程中控制共享资源不加锁，只需要判断状态就好了，所以执行效率比多线程高很多。

缺点：
无法利用多核资源：协程的本质是个单线程,它不能同时将 单个CPU 的多个核用上,协程需要和进程配合才能运行在多CPU上.当然我们日常所编写的绝大部分应用都没有这个必要，除非是cpu密集型应用。
进行阻塞（Blocking）操作（如IO时）会阻塞掉整个程序：这一点和事件驱动一样，可以使用异步IO操作来解决