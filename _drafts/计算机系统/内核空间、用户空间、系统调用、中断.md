# 内核空间、用户空间、系统调用、中断

`内核空间`：内核独立于普通应用程序，拥有受保护的内存空间和访问硬件设备的所有权限。
`用户空间`：应用程序在用户空间执行，只能看到允许它们使用的部分系统资源，并且只使用某些特定的系统功能，`不能直接访问硬件`，也不能访问内核划给别人的内存空间。

当内核运行的时候，系统以内核态进入内核空间执行，而执行一个普通用户程序时，系统将以用户态进入用户空间执行。

`系统调用`：应用程序通过系统调用来与内核通信，通常调用库函数，再由库函数通过系统调用界面让内核代其完成各种不同任务（比如调用C库函数printf()，该库函数会格式化数据后调用内核的write()函数将数据写到控制台上）。在这种情况下，应用程序被称为`通过系统调用`在内核空间运行，而内核被称为运行于进程上下文中，这是应用程序完成其工作的基本行为方式。

`中断`：内核基于中断机制来管理系统的硬件设备，当硬件设备想要和系统通信的时候会首先发出一个异步的中断信号去打断处理器的执行，继而打断内核的执行。中断对应着一个中断号，内核通过这个中断号查找相应的中断服务程序。中断服务程序不在进程上下文中执行，而是在一个与所有进程都无关的、专门的中断上下文中运行，以此保证中断服务程序能够在第一时间响应和处理中断请求，然后快速地退出。

## 处理器在任何指定时间点上的活动必然属于以下三种情况之一
运行于用户空间，执行用户进程；
运行于内核空间，处于进程上下文，代表某个特定的进程执行；（CPU空闲时，内核执行空进程）
运行于内核空间，处于中断上下文，`与任何进程无关`，处理某个特定的中断；

