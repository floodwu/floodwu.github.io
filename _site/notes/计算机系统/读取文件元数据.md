# 读取文件元数据

应用程序可以通过调用stat或fstat函数来检索文件信息，具体的信息通过结构体stat描述。

```c
struct stat{
	dev_t         st_dev;      // device
	ino_t         st_ino;      // inode
	mode_t        st_mode;     // 文件访问许可位和文件类型
	nlink_t       st_nlink;    // 硬链接数
	uid_t         st_uid;      // user id
	gid_t         st_gid;      // group id
	dev_t         st_rdev;     // device type
	off_t         st_size;     // 文件大小（字节数）
	unsigned long st_blksize;  // blocksize for filesystem I/O
	unsigned long st_blocks;   // 已分配的block的数量
	time_t        st_atime;    // 最后访问时间
	time_t        st_mtime;    // 最后修改内容时间
	time_t        st_ctime;    // 最后修改属性（inode）时间
};

int stat( const char *filename, struct stat *buf );
int fstat( int fd, struct stat *buf );
```
例如输入文件名，解析其类型：
```c
int main( int argc, char **argv ){
	struct stat stat;
	char *type,*readok;

	stat(argv[1],$stat);
	if( S_ISREG(stat.st_mode) ){  // 普通文件
		type = "regular";
	}
	else if( S_ISDIR(stat.st_mode) ){ // 目录
		type = "directory";
	}
	else{
		type = "other";
	}

	if((stat.st_mode & S_IRUSR)){
		readok = "yes";
	}
	else{
		readok = "no";
	}

	printf("type:%s,read:%s\n",type,readok);
	exit(0);
}
```