---
layout: post
title:  "《资金管理特别报道》读书笔记"
date: 2018-09-12 00:00:01
categories: 交易
tags: 资金管理
excerpt: ""
---

* content
{:toc}


# 前言
也许， 投机和投资最重大的 “秘密”就是合适的资金管理了。

资金管理之所以是投机和投资成功的关键，是基于这样一个简单的原因：它是算法——那个告诉你某个特定的头寸“该有多大”的算法。


# 第一部分
普罗大众往往试图在市场上来一次大屠杀，把 5000 或者 10000 美元在一年之内变成 100 万美元。奇迹发生的可能性很小，反过来，爆仓则几乎是确定的。
拉尔夫·文斯（Ralph Vince）对四十位博士做过一次试验。他排除了统计学学位和与交易相关的学位，未对其他学位做限制。 这四十个博士学位获得者各自坐在一台电脑钱玩模拟赌局，初始资金是10000美元，有100次交易机会，每次的胜率是60%。赢了就获得投注金额，输了就失去投注金额。

那么你猜猜有多少博士在 100 次投注之后赢了钱？当结果被列示出来时，只有两个人赚了，其他 38 个人赔了。

假设你开始的时候投注 1000 美元，很倒霉，下注三次连输三次——这很有可能。现在你还剩 7000 美元了，你在想， “我已经连输三次了，所以下一次一定能赢。 ”这就是赌徒谬论。

过大的风险承担有心理上的原因——贪婪，不懂得概率，甚至是自毁倾向。

资金回撤20%以内，不需要太多的相应收益率就能将资金返本。40%的资金回撤就需要66.7%的收益率来返本，50%的损失需要100%的收益率，超过50%的损失就需要实现一个巨大的、很难实现的收益率才能返本了。

在期货交易界，当交易账户规模缩水，被叫做资金回撤。

讽刺的是，很多时候资金回撤不过就是赔了从市场上赚来的钱，你只不过回吐了一部分利润。然而，你仍旧会被认为是一个糟糕的投资经理人。峰谷回撤成了你一辈子都揭不掉的标签，标明你曾经给客户带来过什么。

衡量交易表现的一个简单指标就是报酬-风险比率（reward-to-risk ratio）。报酬通常使用年度收益率衡量，在我们假设的情况中，你第一年的年度收益率是4%。风险通常就使用峰谷回撤来衡量，在我们的假设中，你的峰谷回撤是35%。于是，你的交易表现体现为报酬-风险比率4/35，换算为小数是0.114——这真是一个糟透了的结果。

一项研究（Brinson，Singer, and Beebower,1991）显示，82家大型养老金10年期的经营中，资金管理（在此研究中称为资产配置）解释了91.5%的收益回报差异。这项研究还显示了经营计划的设计者所做的投资决策中， 选择资产配置领域和时机，只能解释还不到10%的收益差异。结论很明显，资金管理是交易和投资决策中的临界因素。

资金管理是交易系统中最明确的部分。很多专业的和大多数业余投资者，并不理解其重要性。

因为资金管理是差的表现和好的表现的区别所在，即走向破产和获得成功的区别所在，所以我在此做出定义，请谨记：“资金管理是你的交易系统中，告诉你‘多少’的那一部分。在某一时刻持有‘多少’仓位，愿意承担‘多少’风险。除了你的心理原因，这是你最应该把握的关键的投资准则。 ”

当我读杰克·史瓦格的《市场奇才》时，我很好奇，他在采访那些世界顶尖交易员时，他们都提到了资金管理。下面是一些引用：“风险管理是最重要的，这是要好好理解的第一件事。轻仓，轻仓，再轻仓，这是我的第二条建议。 不论你对建立一个合适头寸有什么样的想法， 先砍掉一半仓位再说。 ——Bruce Kovner”“不要在任何一次交易中承担超过你所有权益的 1%的风险。超过 1%，我和其他任何一个人没有任何不同。保持稳定的低风险是绝对的关键。——Larry Hite”“在极少的稍纵即逝的赚大钱的机会出现之前， 你必须要最小化损失， 尽可能保存资本 。在不够好的交易中失去资本是你承担不起的。——Richard Dennis”专业赌徒会参与期望值很低甚至是负期望值的赌局， 他们使用技巧和知识获取一点点数学期望优势。 这些人非常清楚的知道资金管理是成功的关键。 赌徒的资金管理划分为两类系统——鞅系统和反鞅系统。

鞅系统在输的情况发生时增加投注。

鞅系统假设，你在连续输掉之后，终归会赢 。这个假设没有错，你终归会赢。按照这个思路，你开始的时候每次投注一美元，如果输了就翻倍投注。

在使用鞅系统时，有两个不利因素与你作对。第一，出现一连串的输是有可能的，尤其是对你来说的获胜期望小于50%的赌局。

第二，在赌场中设有投注限制。赌桌上的最小筹码是一美元，而最大的投注被设定为不能超过 50 或者 100 美元。

反鞅系统，在你赢了之后加码，却是起作用的。聪明的赌徒知道赢了之后按一定程度加码， 这一技巧在投资交易中也是起作用的。 这种资金管理系统要求你在成功挣到钱的之后增加头寸规模，对赌博，投机，投资都是如此。资金管理的目的是告诉你，在给定的资金规模情况下，应该持有多少交易单位（股票数或者合约数） 。

有些人认为他们通过“设定止损”在“管理资金”。这样一个停止交易的指令，比如说损失了1000美元之后就结清头寸出场，并没有回答你“该持有多少”这样一个问题，所以这也没有管理你的资金。


# 资金管理模型
下面将要介绍的所有模型都使用了这样一个概念，权益额。确定权益额有三种方法，如果不搞清楚这些方法，使用这些模型的时候就容易搞混。这三种方法分别是核心权益法（Core Equity Method） ，总权益法（Total Equity Method） ，抵减总权益法（Reduced Total Equity Method） 。

核心权益法很简单。当你建立新头寸的时候，就直接使用资金管理模型输出的结果，然后把新头寸占用的资金从权益中减去。 如果你有四个头寸， 那你的核心权益额是你的初始权益减去四个头寸的各自占用资金。

核心权益法不断收缩你的配置金额，直到某一个头寸被结清。每一个新头寸的规模都是根据现有的核心权益额计算的。

总权益法同样很简单， 你的权益总额由你所有账户上的现金和未结清的头寸的价值加总得出。

抵减总权益法可以视为是上面两种方法的结合。 像核心权益法那样， 权益和新头寸也是在不断收缩的，不同点是，头寸的收益，或者移动跟踪止损带来的风险的降低，将会被加回到权益额中。 所以抵减总权益就是核心权益加上头寸的盈利或者移动止损线所降低的风险暴露。 

假设你有一个 50000 美元的账户，你开设了一个 5000 美元规模的头寸， 这时候核心权益是 45000 美元。 假设你的商品头寸发生了有利的价格变化 ，价格上涨了 2000 美元，于是你向对你有利的方向移动了止损线，现在你已经将头寸的风险从最初的 5000 美元降低到只有 3000 美元，所以你的抵减总权益是 47000 美元。第二天，价格下跌了 1000 美元，但是你的抵减总权益还是 47000 美元，因为你设定的止损没有变，你的风险没有更多的暴露，所以，只有在因为价格发生了有利变动而改变止损线的时候，你的抵减权益额才会发生变化。当然，结清头寸也会让权益额变化。


## 模型一：每一固定金额交易一个单位模型
绝大多数书中讨论的资金管理其实是分散化投资或者收益优化。关于系统开发或者技术分析的书甚至从来就没有包含这一部分的内容。结果就是，大多数交易者无处寻得这一投机技巧中最重要的部分。

为了检验所有这些系统的效果， 我使用同一个交易策略， 在同一时间段内交易同一商品交易。这是一个 55 天的通道突破策略，也就是，突破了 55 天的高价就入场做多，反之就做空，止损指令使用反方向上的 21 天通道的跟踪止损。

每天都重新计算新的止损价格，止损线只向对你有利的方向移动，降低风险，锁定收益。

对本文中所有系统的检验，都是通过 1000000 美元的初始权益额，投资于 10 种商品期货市场， 历时从 1981 年到 1991 年的 11 年。 本文中所有的系统测试都是基于上面这个 55/21 天通道突破策略，在同样的期货市场上，经历同样的时段。所有的表格列示结果的不同，都是因为使用不同的资金管理模型造成的。

注意x取值 20000 美元（每 20000 美元建立 1 手合约）造成了爆仓。x取值 30000 美元，你不得不忍受 80%的资金回撤。如果你想避免超过 50%的资金回撤，x取值至少是 70000 美元。

虽然我们承认每一固定金额交易一个单位模型具有总能够入市交易的优点， 但我认为他还不够好，因为 1.各种交易合约有所不同；2.小额的初始资本很难快速提高交易规模。实际上，这个模型对小额资本的头寸调整作用很小。

每一固定金额交易一个单位模型，在我看来，并没有为你做到平均分配资金和风险。但是能够做到均衡投资组合中各个元素的模型有很多， 包括为组合中的每一元素限定等量的 1.标的物价值；2.保证金占用；3.波动幅度；4.风险额（触发止损造成的损失额） 。

## 模型二：价格等值（无杠杆品种）/杠杠杆等值（有杠杆品种）模型
价格等值模型适用于股票或者其他典型的无杠杆品种。模型通过将你的资本划分为等值的五份或者十份来告诉你“该交易多少”。

注意这个程序带来的不便之处，10000 美元也许不是股价的整数倍，尤其是以每 100 股为单位交易的时候，会有很大的余数。

价格等值模型还是存在这样的缺点，盈利之后的加仓来得非常慢。对于小额账户来说，大多数情况下，还是要先将权益额翻倍才能增仓一手。这还是那个问题，对小额账户很难发挥资金管理作用。

## 模型三：保证金比例模型
第三种资金管理模型通过标的物合约的保证金要求来确定头寸大小。 保证金是交易所或者经纪商要求的作为履约保证的一定数额的资金，如果你的账户金额少于保证金的最低要求，就需要增加保证金。

确定第二个头寸的时候要看你使用哪种计算权益额的方法。假设你已经有了一个占用2500 美元保证金的头寸，还有 47500 美元可用资金。如果使用总权益法计算权益额，你的第二个头寸仍旧可以占用 2500 美元，也就是权益额的 5%。但如果使用核心权益额法，或者使用抵减权益额法，你就只能让第二个头寸占用 2375 美元，也就是 47500 美元的 5%。你也可以限定全部的已用保证金之和在账户金额的一定比例之内，比如 30%。


## 模型四：波动率百分比模型
波动率就是一定时段内标的物价格的变化幅度， 或盈或亏， 它直接度量你要面对的价格变化。如果按照权益额的百分比计量，等分你所持每一个头寸的可接受波动率，相当于等分了你当下所持证券组合中每一个元素的可波动范围。

获取收益和保住利润的方法还包括很多其他内容，比如风险百分比、分组控制风险、每日甚至每小时调整、最优化f、充分利用市场的钱。



# 资金管理-第二部分
这四种模型各自与三种权益额计算方法结合，可以演变为 12 种不同的资金管理模型，如果你愿意在他们的基础上增加自己的创意，就不止 12 种了。


## 模型五：风险百分比模型
建立头寸的时候，知道保存资本的退场点在哪儿是最基本的。这就是你的“R”，如果排除跳开和对你不利的暴走单边市影响， “R”就是最坏的情况下的损失。

通常的资金管理模型都是把头寸规模表示为风险的函数的。 

假设你有一个 50000 美元的账户，打算把黄金头寸的总风险限制在权益额的 2.5%，也就是 1250 美元。那么用每份合约的 1000 美元风险除账户可接受的总风险 1250 美元，就得出 1.25。所以使用模型五就只能允许你做一手。

基于 21 天价格极值止损的风险的 5%，与基于 20 天真实波幅移动平均的权益额 1%，表现大致相当。

绝大多数的长期趋势跟踪交易者使用的跟踪止损尺度很大，几倍于平均单日波幅。并且，绝大多数趋势跟踪交易者的系统，在40%到 50%的时间内挣钱，有一个 2.0 到 2.5 的报酬-风险比率。如果你的系统表现没有落在这个范围之内，那你就需要检查一下自己的风险水平了。


## 模型六：定期调整头寸规模
考虑一下以固定时间间隔为基础监控你的头寸规模——每周， 每天， 甚至每小时——以保持固定的风险暴露。 想想这样做的好处是什么。 你可以监控每一个头寸并且确保风险暴露始终是 1%或者更少。这意味着，除非进入了瞬间暴涨暴跌的市场，你的最大风险就是 1%。

我建议你使用总权益额法来监视持续风险 （ongoing risk） 和持续波动 （ongoing volatility）。

记住，资金管理，是你的系统中告诉你仓位大小的独立部分。 如果你的交易系统告诉你要在 410 美元这个价位上止损，而你调整了止损价位，没有遵从你的交易系统，你就把出场策略和资金管理混为一体了。

使用波动幅度调整作为资金管理模型的一部分，你就能保护浮动获利，避免如此巨大的账户日波幅。


## 模型七：分组控制风险
风险控制最重要的方面之一是要有一个分散化的投资组合。交易一定数量的价格变动相关性低的品种，总是能分散风险。

当你试着纳入这种策略的时候，你的困难就变成了，绝大多数的市场不是相互独立的。股票倾向于同时涨跌。牛市的时候，股票分为一定的组，每组倾向于一起运动。比如说，95 年大多数股市的上涨要归因于科技股。当上涨结束，科技股组团下跌——其实，96 年年初，很多科技股就已经下跌了。商品也会分为高度相关的组。谷物，金属，肉食，股票指数，外汇，能源，等等。每一类都可能作为一个组，同时向同一方向运动。所以，你的目的就是，在任何一个时刻，通过资金管理，减少组合中有高相关性的品种的头寸。 你可以通过事先选择有限数量的品种来投资或者交易， 这就是系统设计中的组合选择部分。


## 模型八：投资组合热度
限制你的持仓组合的总风险暴露水平也是非常重要的。这个值被 Ed Seykota 和 Dave Druz 称为投资组合热度。大多数伟大的交易者会坚决主张 20-25%就是你的投资组合热度的最大值。不过，投资组合热度也应该基于你使用的系统有多么好。比如说，一个有着 60% 胜率并且平均每次获利是平均每次损失四倍的系统，要比一个 50%胜率，2-1 得失比的系统好太多了。对于确定投资组合热度，成功的经验之谈是计算你的系统的凯利比率（后面有介绍） 。凯利规则对你的系统的最大风险暴露给出一个很好的近似值。用这个值的 80%作为你的投资组合风险水平可能是比较好的。但如果你的系统的凯利比率近似值的 80%还是超过了25%，那你是在和危险调情。


## 模型九：多头和空头头寸
很多著名的交易者， 是从分组风险控制和投资组合热度的角度去考虑， 划分多空头寸的 。他们认为多空头寸在某种程度上能彼此抵消， 所以一个多头头寸和一个空头头寸——它们的大小，由你所使用的资金管理模型，控制在你中意的市场水平上——应该匹配在一起，被视为一个单元。换句话说，一个 1%风险的玉米多头应该和一个 1%风险的债券空头分为一组作为 1%风险的单元。这给原来的头寸规模确定模型又撮合了新的有意思的内容。


# 使用资金管理来实现你的交易目标
要认识到资金管理是你的系统中对底线影响最大的部分，底线就是你的获利，你的资金回撤，和你的报酬-风险比率。


# 为理财经理设计高报酬-风风险比率的系统
系统设计的第一部分应该专注于在系统中建立最高可能的期望收益率。 期望收益率由下面的公式定义。
```
期望收益率= 获利的可能*平平均获利-损损失的可能*平平均损失
```

我建议你按照下面的步骤使用资金管理模型开发最佳报酬-风险比率：
在某一给定的时间段内，同样的期望值，你完成的交易越多，就越不可能亏损。考虑开发一个高期望收益的系统， 能在短的时间内产生很多的交易， 这样你就一定能够获利。

检测你想法背后的原则， 并且决定是否有一个资金管理模型， 与你开发的系统呈现出逻辑上的符合。

决定哪些方法最适合你。

考虑使用每日头寸规模调整。这意味着限制你的整个系统和每一个头寸的风险暴露。

考虑同时使用多个系统，每个系统使用不同的资金管理模型。

使用一些有创意的资金管理方法来让你的系统与众不同。 上面列示出的模型都是一次线性的。

如果你在资金管理模型上投入的努力与其他大多数人在指出入场点上投入的努力一样多，你的交易思想将会是卓越的。


# 如何最大化收益
讽刺的是，最大化收益的关键是简单的资金管理。你必须平衡打算挣多少和能接受赔多少，并且确保损失不会把你抛得太远以至于回不来。


最优化 f 和凯利规则，公式，略。

另一个使用市场的钱， 具有同等获利能力的常规方法， 是通过金字塔模式加仓和调整止损。

你的金字塔策略就是，每当获利增加一个日波幅或者说一个 V（此例中是 3.5 美 分 ） ，就加仓一次。


