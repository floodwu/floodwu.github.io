# 《推荐系统实践》

# 第1章 好的推荐系统
推荐系统的基本任务是联系用户和物品，解决信息过载的问题

和搜索引擎一样，推荐系统也是一种帮助用户快速发现有用信息的工具。和搜索引擎不同的是，推荐系统不需要用户提供明确的需求，而是通过分析用户的历史行为给用户的兴趣建模，从而主动给用户推荐能够满足他们兴趣和需求的信息。

传统的80/20原则（80%的销售额来自于20%的热门品牌）在互联网的加入下会受到挑战。主流商品往往代表了绝大多数用户的需求，而长尾商品往往代表了一小部分用户的个性化需求。如果要通过发掘长尾提高销售额，就必须充分研究用户的兴趣，而这正是个性化推荐系统主要解决的问题。

尽管不同的网站使用不同的推荐系统技术，但总的来说，几乎所有的推荐系统应用都是由前台的展示页面、后台的日志系统以及推荐算法系统3部分构成的。

个性化推荐的成功应用需要两个条件。第一是存在信息过载，因为如果用户可以很容易地从所有物品中找到喜欢的物品，就不需要个性化推荐了。第二是用户大部分时候没有特别明确的需求，因为用户如果有明确的需求，可以直接通过搜索引擎找到感兴趣的物品。

预测准确度是推荐系统领域的重要指标（没有之一）。但是，很多研究表明，准确的预测并不代表好的推荐。好的推荐系统不仅仅能够准确预测用户的行为，而且能够扩展用户的视野，帮助用户发现那些他们可能会感兴趣，但却不那么容易发现的东西。

在推荐系统中，主要有3种评测推荐效果的实验方法，即：
1.离线实验（offline experiment）
（1）通过日志系统获得用户行为数据，并按照一定格式生成一个标准的数据集；
（2）将数据集按照一定的规则分成训练集和测试集；
（3）在训练集上训练用户兴趣模型，在测试集上进行预测；
（4）通过事先定义的离线指标评测算法在测试集上的预测结果。
它的主要缺点是无法获得很多商业上关注的指标，如点击率、转化率等，而找到和商业指标非常相关的离线指标也是很困难的事情。

2.用户调查（userstudy）
在对算法会不会降低用户满意度不太有把握的情况下，上线测试具有较高的风险，所以在上线测试前一般需要做一次称为用户调查的测试。

3.在线实验（online experiment）
在完成离线实验和必要的用户调查后，可以将推荐系统上线做AB测试，将它和旧的算法进行比较。AB测试是一种很常用的在线评测算法的实验方法。它通过一定的规则将用户随机分成几组，并对不同组的用户采用不同的算法，然后通过统计不同组用户的各种不同的评测指标比较不同算法，比如可以统计不同组用户的点击率，通过点击率比较不同算法的性能。

推荐系统的评测指标：
1.用户满意度：只能通过用户调查或者在线实验（用户行为统计数据）获得。
2.预测准确度：度量一个推荐系统或者推荐算法预测用户行为的能力。这个指标是最重要的推荐系统离线评测指标。
3.覆盖率：描述一个推荐系统对物品长尾的发掘能力。覆盖率有不同的定义方法，最简单的定义为推荐系统能够推荐出来的物品占总物品集合的比例。覆盖率为100%的推荐系统可以将每个物品都推荐给至少一个用户。
4.多样性：多样性描述了推荐列表中物品两两之间的不相似性。如果推荐列表只能覆盖用户的一个兴趣点，而这个兴趣点不是用户这个时刻的兴趣点，推荐列表就不会让用户满意。
5.新颖性：给用户推荐那些他们以前没有听说过的物品。
6.惊喜度：如果推荐结果和用户的历史兴趣不相似，但却让用户觉得满意，那么就可以说推荐结果的惊喜度很高，而推荐的新颖性仅仅取决于用户是否听说过这个推荐结果。
7.信任度：度量推荐系统的信任度只能通过问卷调查的方式，询问用户是否信任推荐系统的推荐结果。同样的推荐结果，以让用户信任的方式推荐给用户就更能让用户产生购买欲，而以类似广告形式的方法推荐给用户就可能很难让用户产生购买的意愿。
8.实时性；
9.健壮性：衡量了一个推荐系统抗击作弊的能力（比如防刷），设计推荐系统时尽量使用代价比较高的用户行为。
10.商业目标；

推荐系统的评测维度：
1.用户维度：主要包括用户的人口统计学信息、活跃度以及是不是新用户等。
2.物品维度：包括物品的属性信息、流行度、平均分以及是不是新加入的物品等。
3.时间维度：包括季节，是工作日还是周末，是白天还是晚上等。
增加评测维度的目的就是知道一个算法在什么情况下性能最好。这样可以为融合不同推荐算法取得最好的整体性能带来参考。如果能够在推荐系统评测报告中包含不同维度下的系统评测指标，就能帮我们全面地了解推荐系统性能，找到一个看上去比较弱的算法的优势，发现一个看上去比较强的算法的缺点。


# 第二章 利用用户行为数据
按照反馈的明确性分，用户行为数据可以分为显性反馈和隐性反馈：
1.显性反馈行为：用户明确表示对物品喜好的行为。
2.隐性反馈行为：不能明确反应用户喜好的行为，最具代表性的隐性反馈行为就是页面浏览行为。
相比显性反馈，隐性反馈虽然不明确，但数据量更大。

按照反馈的方向分，可以分为正反馈和负反馈：
1.正反馈：指用户的行为倾向于指用户喜欢该物品；
2.负反馈：指用户的行为倾向于指用户不喜欢该物品。
在显性反馈中，很容易区分一个用户行为是正反馈还是负反馈，而在隐性反馈行为中，就相对比较难以确定。

用户行为的统一表示：
1.user id：产生行为的用户的唯一标识；
2.item id：产生行为的对象的唯一标识；
3.behavior type行为的种类（比如是购买还是浏览）；
4.context产生行为的上下文，包括时间和地点等；
5.behavior weight行为的权重（如果是观看视频的行为，那么这个权重可以是观看时长；如果是打分行为，这个权重可以是分数）；
6.behavior content行为的内容（如果是评论行为，那么就是评论的文本；如果是打标签的行为，就是标签）；
当然，在很多时候并不使用统一结构表示所有行为，而是针对不同的行为给出不同表示。

互联网上的很多数据分布都满足一种称为Power Law的分布，这个分布在互联网领域也称长尾分布。

不管是物品的流行度还是用户的活跃度，都近似于长尾分布。

一般认为，新用户倾向于浏览热门的物品，因为他们对网站还不熟悉，只能点击首页的热门物品，而老用户会逐渐开始浏览冷门的物品。

基于邻域的模型：仅仅基于用户行为数据设计的推荐算法一般称为协同过滤算法。其中最著名的、在业界得到最广泛应用的是基于邻域的方法，而基于邻域的方法主要包含下面两种算法。   1.基于用户的协同过滤算法：这种算法给用户推荐和他兴趣相似的其他用户喜欢的物品。   2.基于物品的协同过滤算法：这种算法给用户推荐和他之前喜欢的物品相似的物品。

实验验证举例，略。

基于用户的协同过滤算法（UserCF）：
（1）找到和目标用户兴趣相似的用户集合。主要利用行为的相似度计算兴趣的相似度。（两个用户对冷门物品采取过同样的行为更能说明他们兴趣的相似度）
（2）找到这个集合中的用户喜欢的，且目标用户没有听说过的物品推荐给目标用户。

基于物品的协同过滤算法（ItemCF）：
（1）计算物品之间的相似度。
（2）根据物品的相似度和用户的历史行为给用户生成推荐列表。
该算法并不利用物品的内容属性计算物品之间的相似度，它主要通过分析用户的行为记录计算物品之间的相似度。该算法认为，物品A和物品B具有很大的相似度是因为喜欢物品A的用户大都也喜欢物品B。

实验验证举例，略。

UserCF的推荐结果着重于反映和用户兴趣相似的小群体的热点，而ItemCF的推荐结果着重于维系用户的历史兴趣。换句话说，UserCF的推荐更社会化，反映了用户所在的小型兴趣群体中物品的热门程度，而ItemCF的推荐更加个性化，反映了用户自己的兴趣传承。

从技术上考虑，UserCF需要维护一个用户相似度的矩阵，而ItemCF需要维护一个物品相似度矩阵。从存储的角度说，如果用户很多，那么维护用户兴趣相似度矩阵需要很大的空间，同理，如果物品很多，那么维护物品相似度矩阵代价较大。

隐语义模型（LFM）：该算法最早在文本挖掘领域被提出，用于找到文本的隐含语义。它的核心思想是通过隐含特征（latent factor）联系用户兴趣和物品。
该模型在实际使用中有一个困难，那就是它很难实现实时的推荐。
详略。

基于图的模型：可以把基于邻域的模型看做基于图的模型的简单形式。详略。


# 第3章 推荐系统冷启动问题

冷启动问题分类：
1.用户冷启动：当新用户到来时，因为没有他的行为数据，所以也无法根据他的历史行为预测其兴趣，从而无法借此给他做个性化推荐。
2.物品冷启动：主要解决如何将新的物品推荐给可能对它感兴趣的用户这一问题。
3.系统冷启动：主要解决如何在一个新开发的网站上（还没有用户，也没有用户行为，只有一些物品的信息）设计个性化推荐系统，从而在网站刚发布时就让用户体验到个性化推荐服务这一问题。

冷启动问题的常见解决方案：
1.提供非个性化的推荐，比如推荐热门排行榜；
2.利用用户注册时提供的年龄、性别等数据做粗粒度的个性化。
3.利用用户的社交网络账号登录（需要用户授权），导入用户在社交网站上的好友信息，然后给用户推荐其好友喜欢的物品。
4.要求用户在登录时对一些物品进行反馈，收集用户对这些物品的兴趣信息，然后给用户推荐那些和这些物品相似的物品。
5.对于新加入的物品，可以利用内容信息，将它们推荐给喜欢过和它们相似的物品的用户。
6.在系统冷启动时，可以引入专家的知识，通过一定的高效方式迅速建立起物品的相关度表。

解决用户冷启动问题的另一个方法是在新用户第一次访问推荐系统时，不立即给用户展示推荐结果，而是给用户提供一些物品，让用户反馈他们对这些物品的兴趣，然后根据用户反馈给提供个性化推荐。

详细推导过程，略。


# 利用用户标签数据
标签是一种无层次化结构的、用来描述信息的关键词，它可以用来描述物品的语义。根据给物品打标签的人的不同，标签应用一般分为两种：一种是让作者或者专家给物品打标签；另一种是让普通用户给物品打标签，也就是UGC（User Generated Content，用户生成的内容）的标签应用。UGC的标签系统是一种表示用户兴趣和物品语义的重要方式。当一个用户对一个物品打上一个标签，这个标签一方面描述了用户的兴趣，另一方面则表示了物品的语义，从而将用户和物品联系了起来。










































