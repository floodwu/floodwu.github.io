# 用户认证相关的安全问题

认证与授权的区别：认证的目的是为了认出用户是谁，而授权的目的是为了解决用户能够做什么。

密码必须以不可逆的加密算法或者单向散列函数算法加密后存储在数据库中。

## 多因素认证
除密码外，同时使用其他认证手段，比如手机动态口令、数字证书等。

## Session与认证
最常见的做法是把SessionID加密后保存在Cookie中。SessionID一旦在生命周期内被窃取，就等同于账户失窃。

Cookie泄露的途径有很多，比如XSS攻击、网络Sniffer、本地木马窃取等。

SessionID也可以保存在URL中，但是这种方式的安全性太低（发钓鱼链接，通过Referer窃取）。

## Session Fixation攻击
在用户登录网站的过程中，如果登录前后用户的SessionID没有发生变化，则会存在Session Fixation问题。所以，在每次登录成功后应该重写SessionID。

## Session保持攻击
攻击者可以通过不停地发起访问请求让Session一直存活。
如果Session完全存储在Cookie中，可以通过篡改Cookie的Expire时间来使其保持有效。

## 单点登录
SSO，Single Sign On。
目前最开放和流行的单点登录系统是OpenID，使用URI作为用户在互联网上的身份标识，每个用户将拥有一个唯一的URI，在用户登录网站时，只要提交他的OpenID以及OpenID的提供者，网站就会将用户重定向到OpenID的提供者进行认证，认证完后再重定向回网站。