# C++中虚函数的实现机制？

表面现象：虚函数是在类中被声明为virtual的成员函数，`当编译器看到通过指针或引用调用此类函数时，对其执行晚绑定`，即通过指针（或引用）指向的类的类型信息来决定该函数是哪个类的。
实现机制：`编译器对每个包含虚函数的类创建一个表（称为VTABLE）`。在VTABLE中，编译器放置特定类的虚函数地址。在每个带有虚函数的类中，编译器置一指针，称为vpointer（缩写为VPTR），指向这个对象的VTABLE。通过基类指针做虚函数调用时（也就是做多态调用时），编译器静态地插入取得这个VPTR，并在VTABLE表中查找函数地址的代码，这样就能调用正确的函数使晚捆绑发生。