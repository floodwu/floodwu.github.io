# 代理、网关、隧道的工作方式

## 代理

代理服务器的基本行为就是接收客户端发送的请求后转发给其他服务器，代理不改变请求URI，会直接发送给前方持有资源的目标服务器。从源服务器返回的响应经过代理服务器后再传给客户端。转发时，需要附加`Via首部字段`以标记出经过的主机信息：

```
客户端 -> proxy1
proxy1 -> Via：proxy1 -> proxy2
proxy2 -> Via：proxy2 -> 源服务器

proxy2 <- 源服务器
proxy1<- Via：proxy2 <-proxy2 
客户端 <- Via：proxy1 <-proxy1
```


使用代理的主要理由通常是：利用缓存技术减少网络带宽的流量，组织内部针对特定网站的访问控制，以获取访问日志为主要目的，等等。

## 网关

网关的工作机制和代理很相似，但是`网关能使通信线路上的服务器提供非HTTP协议的服务，因此可以利用网关由HTTP请求转化为其他协议通信，与其他系统联动`。



## 隧道

隧道可按要求建立起一条与其他服务器的通信线路，然后使用SSL等加密手段进行通信，目的是确保客户端能与服务器端进行安全的通信。隧道本身不会去解析HTTP请求，而是将请求保持原样中转给之后的服务器。