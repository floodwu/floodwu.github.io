# HTTPS工作方式

HTTP协议使用明文方式发送报文，本身不具备加密功能，不验证通信双方的身份，也无法验证报文的完整性，因此存在窃听、身份伪装和内容篡改等安全问题。
`HTTPS = HTTP + 加密 + 认证 + 完整性保护`，用SSL建立安全通信线路后，就可以在这条线路上进行HTTP通信，与SSL（或者TLS）组合使用的HTTP被称为HTTPS。
HTTPS的通信步骤：


1.客户端------------------Handshake:ClientHello------------------->服务器 开始SSL通信，报文内容包括支持的SSL版本，加密组件列表等信息

2.客户端<---------------Handshake:ServerHello---------------------服务器 服务器端应答，报文内容包括支持的SSL版本，加密组件列表等信息

3.客户端<---------------Handshake:Certificate-----------------------服务器 Certificate报文中包含公开密钥证书

4.客户端<---------------Handshake:ServerHelloDone---------------服务器 SSL握手协商结束

5.客户端-----------------Handshake:ClientKeyExchange---------->服务器 报文内容包含一个随机密码串，且使用第3步中的公钥进行加密

6.客户端-----------------ChangeCipherSpec------------------------->服务器 提示服务器，此后的报文通信会采用Pre-master secret密钥加密

7.客户端-----------------Handshake:Finished------------------------>服务器 Finish报文，会包含连接至今全部报文整体校验值

8.客户端<---------------ChangeCipherSpec---------------------------服务器 

9.客户端<---------------Handshake:Finished--------------------------服务器 



**SSL链接建立完成**，之后进行应用层协议的通信。应用层发送数据时会附加一种叫做MAC（Message Authentication Code）的报文摘要，能够查知报文是否遭到篡改，从而保护报文的完整性。



10.客户端---------------Application Data(HTTP)------------------->服务器 

11.客户端<--------------Application Data(HTTP)--------------------服务器 

**由客户端断开SSL链接**：

12.客户端----------------Alert:warning,close notify----------------->服务器。


