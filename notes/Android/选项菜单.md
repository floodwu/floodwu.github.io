# 选项菜单

创建一个定义菜单的XML文件，放在res/menu目录下，Android会自动生成该XML文件的对应的资源ID：

```xml
<menu cmlns:android=’xxx’>
<item 
android:id=”@+id/menu_item_new_crime”
android:icon=”@android:drawable/ic_menu_add”
android:title=”@string/new_crime”
android:showAsAction=”ifRoom|withText”  // 其他可选值：always、never
/>
</menu>
```
showAsAction属性用于指定菜单选项是显示在操作栏上，还是隐藏到溢出菜单中。

在Fragment中实例化选项菜单：
```java
public class CrimeListFragment extends ListFragment{
...
@Override
public void onCreate(Bundle savedInstanceState){
super.onCreate(savedInstanceState);
setHasOptionsMenu(true);  // Fragment的onCreateOptionMenu(...)方法是由FragmentManager负责调用的，因此当activity接收到来自操作系统的onCreateOptionMenu(...)方法调用时，必须明确告诉FragmentManager：其所管理的fragment应接收onCreatOptionMenu(...)方法的调用
...
}

@Override
public void onCreateOptionMenu(Menu menu, MenuInflater inflater){
super.onCreateOptionsMenu(menu,inflater);
inflater.inflate(R.menu.fragment_crime_list,menu); // 加载菜单布局
}

@Override
public boolean onOptionsItemSelected(MenuItem item){ // 响应菜单点击事件
switch(item.getItemId()){
case R.id.menu_item_new_crime:
...
return true;
default:
return super.onOptionsItemSelected(item);
}
}

}
```