# 层级式导航

使用后退键的导航称为临时性导航，只能返回到上一次的用户界面。层级式导航可逐级向上在应用内导航。Android可轻松利用操作栏上的应用图标实现层级式导航，即逐级向上直至应用的初始界面。通常，应用图标一旦启用了向上导航按钮的功能，在应用图标的左边就会显示一个向左指向的图标。

在定义应用图标的点击响应事件时，回到某Activity可以使用Intent.FLAG_ACTIVITY_CLEAR_TOP来启动指定的Activity。然而，Android有更好的办法实现层级式导航：配合使用NavUtils以及manifest中的元数据。
首先修改AndroidManifest.xml文件，在CrimePagerActivity声明中添加meta-data属性，指定CrimePagerAactivity的父类为CrimeListActivity：
```
<activity 
android:name=”.CrimePagerActivity”
android:label=”@string/app_name”>
<meta-data
android:name=”android.support.PARENT_ACTIVITY”
android:value=”.CrimeListActivity”>
</activity>
```

```java
public class CrimeFragment extends Fragment{
...
@Override
public void onCreate(Bundle savedInstanceState){
...
setHasOptionsMenu(true);  
}

// 响应应用图标菜单项
@Override
public boolean onOptionsItemSelected(MenuItem item){ // 响应菜单点击事件
switch(item.getItemId()){
case android.R.id.home:  // 响应回到父Activity
if(NavUtils.getParentActivityName(getActivity())!=null){
NavUtils.navigateUpFromSameTask(getActivity());
}
return true;
default:
return super.onOptionsItemSelected(item);
}
}


@TargetApi(11)
@Override
public View onCreateView(LayoutInflater inflater,ViewGroup parent,Bundle savedInstanceState){
...
if(BUILD.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB){
getActivity().getActionBar.setDisplayHomeAsUpEnabled(true);  // 启用应用图标的向上导航功能，但这仅仅是让应用图标转变为按钮，显示一个向左的图标而已
}
...
}
```