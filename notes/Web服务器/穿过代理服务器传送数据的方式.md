# 穿过代理服务器传送数据的方式

有些时候需要穿过代理，比如获取用户的实际IP，这一般是通过自定义一些服务器变量（反向代理服务器请求后端服务器时会设置）来实现，如Nginx：

```
location / {
  proxy_pass http://location:8001;
  proxy_set_header X-Real-IP $remote_addr;
}
```
这样，后端程序可以通过访问服务器变量$_SERVER['HTTP_X_REAL_IP']来获得用户的实际IP。

同样的，如果后端服务器想要透过反向代理来告诉浏览器一些额外信息（比如当存在多个后端服务器时），也可以通过在响应HTTP头信息中携带一定的自定义信息来实现：
```
header('X-Real-Server-IP:10.0.0.1');
```
这样，最终反向代理返回的HTTP头信息中有如下内容：
```
X-Real-Server-IP:10.0.0.1
```